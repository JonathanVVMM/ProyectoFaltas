<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ProyectoFaltas.Views.ViewCalendar"
             xmlns:controls="clr-namespace:Plugin.Maui.Calendar.Controls;assembly=Plugin.Maui.Calendar"
             BackgroundColor="{StaticResource Gray200}">

    <Grid ColumnDefinitions="*,2*" RowDefinitions="3*,*" Padding="20" ColumnSpacing="20">
        <Frame Grid.Column="0" VerticalOptions="Start">
            <controls:Calendar BackgroundColor="{StaticResource Gray100}"
                               SelectedDate="{Binding SelectedDay,Mode=TwoWay}" DaysTitleColor="Black"
                               YearLabelColor="#2F593A" MonthLabelColor="#2F593A"
                               SelectedDayBackgroundColor="#2F593A" SelectedDateColor="#2F593A"
                               TodayOutlineColor="#2F593A" ArrowsBackgroundColor="#2F593A"
                               ArrowsBorderColor="White" ArrowsColor="White"
                               FooterArrowVisible="False" FooterSectionVisible="False">
            </controls:Calendar>
        </Frame>

        <Image Source="serraperenxisa.png" Grid.Column="0" Grid.Row="1" VerticalOptions="Center" Aspect="AspectFit"/>

        <!-- CUANDO CLICAS EN UN DIA CON EVENTO -->
        <Frame Grid.Column="1" Grid.RowSpan="2">

            <Grid RowDefinitions="*,*,*" RowSpacing="10" ColumnDefinitions="*,*" ColumnSpacing="10">

                <VerticalStackLayout Grid.Column="0" Grid.Row="0" Grid.RowSpan="3" HorizontalOptions="Center">
                    <HorizontalStackLayout Spacing="13">
                        <Label Text="Faltas del dia" FontSize="Medium"/>
                        <Label Text="{Binding stringSelectedDay}" FontSize="Medium"/>
                    </HorizontalStackLayout>

                    <CollectionView x:Name="ListaFaltaCalendario" ItemsSource="{Binding ListaFaltas, Mode=TwoWay}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="2*,*,*">
                                    <Label Text="{Binding profesorNombreApellido}"/>
                                    <Label Text="{Binding nombreTipoFalta}" Grid.Column="1"/>
                                    <Label Text="{Binding UltimaModificacion}" Grid.Column="2"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>

                <StackLayout Grid.Row="0" Grid.Column="1">
                    <Label Text="Selecciona un profesor:" FontSize="Medium" />
                    <Picker x:Name="ProfesorPicker" ItemsSource="{Binding ListaProfesores}" ItemDisplayBinding="{Binding Nombre}" SelectedItem="{Binding ProfesorSeleccionado}" />
                </StackLayout>

                <StackLayout Grid.Row="1" Grid.Column="1">
                    <Label Text="Selecciona tipo de falta:" FontSize="Medium" />
                    <Picker x:Name="TipoFaltaPicker" ItemsSource="{Binding ListaTipoFaltas}" ItemDisplayBinding="{Binding Tipo}" SelectedItem="{Binding TipoFaltaSeleccionado}"/>
                </StackLayout>

                <StackLayout Grid.Row="2" Grid.Column="1">
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button x:Name="AddFalta" Grid.Column="0" Text="AÃ±adir Falta" Clicked="AddFalta_Clicked"/>
                    </Grid>
                </StackLayout>
            </Grid>

        </Frame>
    </Grid>


</ContentPage>